(this["webpackJsonpbasic-app"]=this["webpackJsonpbasic-app"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(20),a=n.n(r),i=(n(28),n(23)),o=n(4),j=(n(29),n(3)),u=n(7),l=n(0);var b=function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Welcome to Chat App Lets connect"}),Object(l.jsxs)("div",{className:"signup-btns",children:[Object(l.jsx)(u.b,{to:"/signup",children:Object(l.jsx)("button",{children:"Signup"})}),Object(l.jsxs)(u.b,{to:"/signin",children:[" ",Object(l.jsx)("button",{children:"Signin"})," "]})]})]})},h=n(8),d=n.n(h),O=n(9),p=n(11),f=n.n(p);n(42),n(44);f.a.initializeApp({apiKey:"AIzaSyCw7yoW5z2K-LmpjjqF6pHvLPbhS72dXKg",authDomain:"chat-app-1a2bc.firebaseapp.com",databaseURL:"https://chat-app-1a2bc-default-rtdb.firebaseio.com",projectId:"chat-app-1a2bc",storageBucket:"chat-app-1a2bc.appspot.com",messagingSenderId:"148615798371",appId:"1:148615798371:web:30d3b5c77514da72382256"});var x=f.a.auth();console.log("authis ",x);var g=f.a.database();function v(e,t){return m.apply(this,arguments)}function m(){return(m=Object(O.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.createUserWithEmailAndPassword(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return console.log("signi in user",e,t),x.signInWithEmailAndPassword(e,t)}var I=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),i=Object(o.a)(a,2),u=i[0],b=i[1],h=Object(c.useState)(null),p=Object(o.a)(h,2),f=p[0],x=p[1],g=Object(j.g)(),v=function(){var e=Object(O.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(s,u);case 3:t=e.sent,console.log(" user after signin",t.user.email),localStorage.setItem("userInfo",t.user.email),g.push("/chat"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),x(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return localStorage.getItem("userInfo")?Object(l.jsx)(j.a,{to:"/chat"}):Object(l.jsxs)("div",{children:[Object(l.jsxs)("h4",{children:[null===f||void 0===f?void 0:f.message," "]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"Email "}),Object(l.jsx)("input",{onChange:function(e){return r(e.target.value)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"Password "}),Object(l.jsx)("input",{onChange:function(e){return b(e.target.value)}})]}),Object(l.jsx)("button",{onClick:v,children:"Signin"})]})};function C(e,t){g.ref("users").push({name:e,email:t})}var y=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(""),i=Object(o.a)(a,2),u=i[0],b=i[1],h=Object(c.useState)(""),p=Object(o.a)(h,2),f=p[0],x=p[1],g=Object(c.useState)(null),m=Object(o.a)(g,2),S=m[0],I=m[1],y=Object(j.g)(),w=function(){var e=Object(O.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(s,u);case 3:t=e.sent,console.log("user signup success",t),C(f,s),y.push("/signin"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),I(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return console.log("error",S),localStorage.getItem("userInfo")?Object(l.jsx)(j.a,{to:"/chat"}):Object(l.jsx)("div",{children:Object(l.jsxs)("div",{children:[Object(l.jsxs)("h4",{children:[null===S||void 0===S?void 0:S.message," "]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"Name "}),Object(l.jsx)("input",{onChange:function(e){return x(e.target.value)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"Email "}),Object(l.jsx)("input",{onChange:function(e){return r(e.target.value)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{children:"Password "}),Object(l.jsx)("input",{onChange:function(e){return b(e.target.value)}})]}),Object(l.jsx)("button",{onClick:w,children:"Signup"})]})})};var w=function(e){return Object(l.jsx)("div",{children:Object(l.jsx)("h3",{children:"Hey Seems like you are Lost Go to home page"})})};var k=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(0),i=Object(o.a)(a,2);return i[0],i[1],console.log("state values",s,r),Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(u.b,{to:"/",children:Object(l.jsx)("h3",{children:"Chat App"})}),Object(l.jsx)("div",{children:Object(l.jsxs)("div",{children:[" ",Object(l.jsx)("h4",{children:s}),Object(l.jsx)("button",{onClick:function(){return r("Anshu")},children:"Update name"})]})}),Object(l.jsx)("img",{src:e.profilePicture,alt:"profile-pic"})]})})};var A=function(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),s=n[0],r=n[1],a=e.msgs,i=localStorage.getItem("userInfo");return Object(l.jsxs)("div",{className:"chabox",children:[Object(l.jsx)("div",{children:a&&a.map((function(e){return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:e.userInfo!==i?"left":"right",children:e.content})})}))}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),function(e,t){g.ref("msgs").push({content:e,timestamp:Date.now(),userInfo:t})}(s,i),r("")},children:[Object(l.jsx)("input",{value:s,onChange:function(e){return r(e.target.value)}}),Object(l.jsx)("button",{type:"submit",children:"Send Message"})]})]})};var E=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(!1),i=Object(o.a)(a,2),u=i[0],b=i[1],h=Object(c.useState)([]),d=Object(o.a)(h,2),O=d[0],p=d[1],f=Object(j.g)(),v=localStorage.getItem("userInfo");return Object(c.useEffect)((function(){console.log("inside useEffect"),g.ref("users").on("value",(function(e){var t=[];console.log("inside listener"),e.forEach((function(e){var n=e.val();t.push({name:n.name,email:n.email})})),console.log("user is",t),r(t)})),g.ref("msgs").on("value",(function(e){var t=[];e.forEach((function(e){var n=e.val();t.push(n)})),console.log("mesggafesare",t),p(t)}))}),[]),Object(l.jsxs)("div",{children:[Object(l.jsxs)("h4",{children:["Hey ",v," Lets chat"]}),Object(l.jsx)("button",{onClick:function(){x.signOut(),localStorage.removeItem("userInfo"),f.push("/")},children:" Signout"})," ",Object(l.jsx)("button",{onClick:function(){return b(!0)},children:"Chat With Users "}),Object(l.jsx)("div",{style:{height:"200px",width:"80%"},children:s.map((function(e){return Object(l.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(l.jsx)("li",{style:{margin:"20px"},children:e.name})," "]})}))}),u&&Object(l.jsx)(A,{msgs:O})]})};var P=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)((function(){var e=x.currentUser;s(e)}),[]),console.log("user",n);var r=localStorage.getItem("userInfo");function a(e){var t=e.Component,n=(e.props,e.path);return Object(l.jsx)(j.b,{path:n,render:function(e){return r?Object(l.jsx)(t,Object(i.a)({},e)):Object(l.jsx)(j.a,{to:"/signin"})}})}return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("h2",{children:"Hello word"}),Object(l.jsxs)(u.a,{children:[Object(l.jsx)(k,{profilePicture:"https://yt3.ggpht.com/yti/APfAmoEh3Q8f2tMT2ixHZsrniLzi4IU1tkhCs82VPY-BeA=s88-c-k-c0x00ffffff-no-rj-mo"}),Object(l.jsxs)(j.d,{children:[Object(l.jsx)(j.b,{path:"/",exact:!0,component:b}),Object(l.jsx)(j.b,{path:"/signin",exact:!0,component:I}),Object(l.jsx)(j.b,{path:"/signup",exact:!0,component:y}),Object(l.jsx)(a,{path:"/chat",Component:E}),Object(l.jsx)(j.b,{component:w})]})]})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(P,{})}),document.getElementById("root")),L()}},[[48,1,2]]]);
//# sourceMappingURL=main.c379ebdf.chunk.js.map